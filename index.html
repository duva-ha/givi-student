<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-TECH Hub 2026 - Student Official</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

    <script src="bai1-10.js" defer></script>
    <script src="bai2-10.js" defer></script>
    <script src="bai3-10.js" defer></script>
    <script src="bai4-10.js" defer></script>
    <script src="bai5-10.js" defer></script>
    <script src="bai15-10.js" defer></script>
    <script src="bai16-10.js" defer></script>
    <script src="bai17-10.js" defer></script>
    <script src="bai18-10.js" defer></script>
    <script src="bai19-10.js" defer></script>
    <script src="bai20-10.js" defer></script>

    <script src="quizzes.js" defer></script>
    <script src="LTAP1.js" defer></script>
    <script src="TLIEU1.js" defer></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #fdfdfb; margin: 0; overflow: hidden; color: #334155; }
        aside { background: #1e293b; width: 260px; flex-shrink: 0; transition: all 0.4s ease; }
        .nav-active { background: rgba(255,255,255,0.1); border-left: 3px solid #3b82f6; color: white; }
        .custom-scroll::-webkit-scrollbar { width: 3px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .modal-overlay { background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(10px); }
        .hide-sidebar { transform: translateX(-100%); width: 0 !important; opacity: 0; }
        
        /* CH·ªàNH K√çCH TH∆Ø·ªöC CH·ªÆ */
        .lesson-title { font-size: 24px !important; font-weight: 800; line-height: 1.2; color: #1e293b; }
        .lesson-content { font-size: 16px !important; line-height: 1.8; color: #475569; }
        
        .lesson-item { cursor: pointer; transition: 0.3s; border: 1px solid transparent; border-radius: 1rem; }
        .lesson-item.active { background: #fff; border-color: #e2e8f0; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        const firebaseConfig = {
            apiKey: "AIzaSyAV-XVaOyUiq1c-29VTaWjLKcEXrssnnTE",
            authDomain: "qlhs10a7.firebaseapp.com",
            projectId: "qlhs10a7",
            storageBucket: "qlhs10a7.firebasestorage.app",
            appId: "1:584229565603:web:d47a10f0a512a1a309bb16"
        };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        function App() {
            const [user, setUser] = useState(null);
            const [tab, setTab] = useState('baigiang');
            const [grade, setGrade] = useState('10');
            const [ls, setLs] = useState(null);
            const [isFocus, setIsFocus] = useState(false);
            
            const [localLessons, setLocalLessons] = useState({ "10": [], "11": [], "12": [] });
            const [practiceData, setPracticeData] = useState([]);
            const [docData, setDocData] = useState([]);

            const scanData = useCallback(() => {
                const resLessons = { "10": [], "11": [], "12": [] };
                // QU√âT ƒê·ª¶ T·ª™ B√ÄI 1 ƒê·∫æN B√ÄI 20
                ["10", "11", "12"].forEach(g => {
                    for (let i = 1; i <= 20; i++) {
                        const d = window[`D${g}_B${i}`];
                        if (d) resLessons[g].push({ ...d, lessonIndex: i });
                    }
                });

                const resP = []; const resD = [];
                for (let i = 1; i <= 10; i++) {
                    if (window[`LTAP${i}`]) resP.push(window[`LTAP${i}`]);
                    if (window[`TLIEU${i}`]) resD.push(window[`TLIEU${i}`]);
                }

                setLocalLessons(prev => JSON.stringify(prev) !== JSON.stringify(resLessons) ? resLessons : prev);
                setPracticeData(prev => JSON.stringify(prev) !== JSON.stringify(resP) ? resP : prev);
                setDocData(prev => JSON.stringify(prev) !== JSON.stringify(resD) ? resD : prev);
            }, []);

            useEffect(() => {
                const unsub = auth.onAuthStateChanged(u => setUser(u));
                const timer = setInterval(scanData, 1000);
                return () => { unsub(); clearInterval(timer); };
            }, [scanData]);

            useEffect(() => {
                const list = localLessons[grade];
                if (list && list.length > 0) {
                    if (!ls || ls.grade !== grade) setLs(list[0]);
                } else setLs(null);
            }, [grade, localLessons]);

            if (!user) return (
                <div className="h-screen flex items-center justify-center bg-slate-900">
                    <button onClick={() => auth.signInWithPopup(new firebase.auth.GoogleAuthProvider())} className="bg-white text-slate-900 px-8 py-3 rounded-xl font-bold uppercase text-xs">ƒêƒÉng nh·∫≠p b·∫±ng Google</button>
                </div>
            );

            return (
                <div className="flex h-screen overflow-hidden">
                    <aside className={`flex flex-col p-6 z-50 transition-all duration-500 shadow-xl ${isFocus ? 'hide-sidebar' : ''}`}>
                        <div className="mb-10 px-4 font-black text-2xl text-blue-500 italic uppercase">E-Tech Hub</div>
                        <nav className="flex-1 space-y-1">
                            <button onClick={() => setTab('baigiang')} className={`w-full flex items-center gap-4 px-6 py-4 text-[10px] font-black uppercase tracking-widest rounded-xl transition-all ${tab === 'baigiang' ? 'nav-active shadow-md' : 'text-slate-500 hover:text-white'}`}>üìñ B√†i gi·∫£ng</button>
                            <button onClick={() => setTab('luyentap')} className={`w-full flex items-center gap-4 px-6 py-4 text-[10px] font-black uppercase tracking-widest rounded-xl transition-all ${tab === 'luyentap' ? 'nav-active shadow-md' : 'text-slate-500 hover:text-white'}`}>üìù Luy·ªán t·∫≠p</button>
                            <button onClick={() => setTab('kiemtra')} className={`w-full flex items-center gap-4 px-6 py-4 text-[10px] font-black uppercase tracking-widest rounded-xl transition-all ${tab === 'kiemtra' ? 'nav-active shadow-md' : 'text-slate-500 hover:text-white'}`}>üéØ Ki·ªÉm tra</button>
                            <button onClick={() => setTab('tuliaeu')} className={`w-full flex items-center gap-4 px-6 py-4 text-[10px] font-black uppercase tracking-widest rounded-xl transition-all ${tab === 'tuliaeu' ? 'nav-active shadow-md' : 'text-slate-500 hover:text-white'}`}>üìö T∆∞ li·ªáu</button>
                        </nav>
                    </aside>

                    <main className="flex-1 bg-white relative rounded-l-[2.5rem] shadow-2xl overflow-hidden flex flex-col border-l border-slate-100">
                        <header className="h-14 px-8 border-b flex items-center justify-between bg-white/80 backdrop-blur-md z-40">
                             <div className="flex items-center gap-4 font-black text-[10px] uppercase text-slate-400">
                                <span>Kh·ªëi l·ªõp</span>
                                <select value={grade} onChange={e=>setGrade(e.target.value)} className="bg-transparent font-black text-blue-600 outline-none">
                                    <option value="12">L·ªõp 12</option><option value="11">L·ªõp 11</option><option value="10">L·ªõp 10</option>
                                </select>
                            </div>
                            <button onClick={() => setIsFocus(!isFocus)} className="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-slate-100 text-slate-400">
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" /></svg>
                            </button>
                        </header>

                        <div className="flex-1 flex overflow-hidden">
                            {tab === 'baigiang' && (
                                <React.Fragment>
                                    <div className={`w-80 bg-slate-50/50 border-r p-6 overflow-y-auto custom-scroll space-y-2 ${isFocus ? 'hide-sidebar' : ''}`}>
                                        {localLessons[grade].map((l, idx) => (
                                            <div key={idx} onClick={()=>setLs(l)} className={`lesson-item p-4 ${ls?.id === l.id ? 'active bg-white' : ''}`}>
                                                <div className="text-[8px] font-black text-slate-300 uppercase mb-1">B√†i {l.lessonIndex}</div>
                                                <div className="font-bold text-xs text-slate-700">{l.title}</div>
                                            </div>
                                        ))}
                                    </div>
                                    <div className="flex-1 p-16 overflow-y-auto custom-scroll">
                                        {ls && (
                                            <div className="max-w-5xl mx-auto animate-in fade-in duration-700">
                                                <h2 className="lesson-title mb-10 tracking-tighter">{ls.title}</h2>
                                                <div className="bg-slate-50 p-12 rounded-[2.5rem] lesson-content whitespace-pre-wrap italic shadow-inner border border-slate-100">{ls.content}</div>
                                            </div>
                                        )}
                                    </div>
                                </React.Fragment>
                            )}

                            {tab === 'luyentap' && (
                                <div className="flex-1 p-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 overflow-y-auto custom-scroll">
                                    {practiceData.filter(p => p.grade === grade).map(item => (
                                        <div key={item.id} className="bg-white p-8 rounded-[2.5rem] border border-emerald-100 shadow-sm h-80 flex flex-col justify-between">
                                            <div className="text-3xl">üìù</div>
                                            <h4 className="text-xl font-black text-slate-800">{item.title}</h4>
                                            <button className="w-full py-4 bg-emerald-600 text-white rounded-2xl font-black uppercase text-[10px]">Luy·ªán t·∫≠p ngay</button>
                                        </div>
                                    ))}
                                </div>
                            )}

                            {tab === 'kiemtra' && (
                                <div className="flex-1 p-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 overflow-y-auto custom-scroll">
                                    {window.E_TECH_QUIZZES?.filter(q => q.grade === grade).map(quiz => (
                                        <div key={quiz.id} className="bg-white p-8 rounded-[2.5rem] border border-slate-100 shadow-sm h-80 flex flex-col justify-between">
                                            <div className="text-3xl">üéØ</div>
                                            <h4 className="text-xl font-black text-slate-800">{quiz.title}</h4>
                                            <button className="w-full py-4 bg-slate-900 text-white rounded-2xl font-black uppercase text-[10px]">B·∫Øt ƒë·∫ßu thi</button>
                                        </div>
                                    ))}
                                </div>
                            )}

                            {tab === 'tuliaeu' && (
                                <div className="flex-1 p-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 overflow-y-auto custom-scroll">
                                    {docData.filter(d => d.grade === grade).map(item => (
                                        <div key={item.id} className="bg-white p-8 rounded-[2.5rem] border border-amber-100 shadow-sm h-80 flex flex-col justify-between">
                                            <div className="text-3xl">üìö</div>
                                            <h4 className="text-xl font-black text-slate-800">{item.title}</h4>
                                            <a href={item.link} target="_blank" className="w-full py-4 bg-amber-600 text-white rounded-2xl font-black uppercase text-[10px] text-center">Xem t∆∞ li·ªáu</a>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    </main>
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
