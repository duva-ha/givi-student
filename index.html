<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-TECH Hub - Student Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; margin: 0; overflow: hidden; }
        .sidebar-active { background: #0ea5e9; color: white; box-shadow: 0 10px 15px -3px rgba(14, 165, 233, 0.3); }
        .lesson-item { border-radius: 12px; transition: all 0.2s; cursor: pointer; border: 1px solid transparent; }
        .lesson-item.active { background: #e0f2fe; border-color: #0ea5e9; color: #0369a1; font-weight: 700; }
        .modal-overlay { background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(10px); }
        .neo-card { background: white; border-radius: 1.5rem; border: 1px solid #e2e8f0; transition: all 0.3s ease; }
        .custom-scroll::-webkit-scrollbar { width: 5px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // 1. C·∫§U H√åNH FIREBASE - KI·ªÇM TRA K·ª∏ TH√îNG TIN N√ÄY
        const firebaseConfig = {
            apiKey: "AIzaSyAV-XVaOyUiq1c-29VTaWjLKcEXrssnnTE",
            authDomain: "qlhs10a7.firebaseapp.com",
            projectId: "qlhs10a7",
            storageBucket: "qlhs10a7.firebasestorage.app",
            messagingSenderId: "584229565603",
            appId: "1:584229565603:web:d47a10f0a512a1a309bb16"
        };

        // Kh·ªüi t·∫°o Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const auth = firebase.auth();
        const db = firebase.firestore();

        // 2. D·ªÆ LI·ªÜU B√ÄI T·∫¨P & KI·ªÇM TRA
        const MOCK_TESTS = [
            {
                id: "t1", title: "Ki·ªÉm tra 5 ph√∫t - C√¥ng ngh·ªá L·ªõp 12", duration: 300,
                questions: [
                    { q: "Linh ki·ªán n√†o d√πng ƒë·ªÉ khu·∫øch ƒë·∫°i t√≠n hi·ªáu?", a: ["ƒêi·ªán tr·ªü", "T·ª• ƒëi·ªán", "Transistor", "Cu·ªôn c·∫£m"], correct: 2 },
                    { q: "ƒê∆°n v·ªã c·ªßa ƒëi·ªán tr·ªü l√† g√¨?", a: ["Ampe", "Ohm", "Volt", "Farad"], correct: 1 },
                    { q: "Tr√¨nh t·ª± thi·∫øt k·∫ø k·ªπ thu·∫≠t g·ªìm m·∫•y b∆∞·ªõc ch√≠nh?", a: ["3 b∆∞·ªõc", "4 b∆∞·ªõc", "5 b∆∞·ªõc", "6 b∆∞·ªõc"], correct: 2 }
                ]
            }
        ];

        const COURSE_DATA = {
            "12": [
                { id: "12-1", title: "B√†i 1: Kh√°i ni·ªám h·ªá th·ªëng k·ªπ thu·∫≠t", content: "H·ªá th·ªëng k·ªπ thu·∫≠t l√† t·∫≠p h·ª£p c√°c ph·∫ßn t·ª≠ li√™n k·∫øt v·ªõi nhau ƒë·ªÉ th·ª±c hi·ªán m·ªôt nhi·ªám v·ª• nh·∫•t ƒë·ªãnh..." },
                { id: "12-2", title: "B√†i 2: Ng√†nh ngh·ªÅ k·ªπ thu·∫≠t c√¥ng ngh·ªá", content: "T√¨m hi·ªÉu v·ªÅ c√°c nh√≥m ng√†nh ngh·ªÅ trong lƒ©nh v·ª±c ƒëi·ªán, ƒëi·ªán t·ª≠ v√† c∆° kh√≠..." }
            ]
        };

        // 3. COMPONENT L√ÄM B√ÄI KI·ªÇM TRA
        function TestModule({ test, onClose }) {
            const [timeLeft, setTimeLeft] = useState(test.duration);
            const [answers, setAnswers] = useState({});
            const [result, setResult] = useState(null);

            useEffect(() => {
                if (timeLeft <= 0) { submit(); return; }
                const timer = setInterval(() => setTimeLeft(t => t - 1), 1000);
                return () => clearInterval(timer);
            }, [timeLeft]);

            const submit = () => {
                let score = 0;
                test.questions.forEach((q, i) => { if (answers[i] === q.correct) score++; });
                setResult(score);
            };

            return (
                <div className="fixed inset-0 z-[100] modal-overlay flex items-center justify-center p-4">
                    <div className="bg-white w-full max-w-2xl rounded-[2.5rem] shadow-2xl flex flex-col max-h-[90vh] overflow-hidden">
                        <div className="p-8 border-b bg-slate-50 flex justify-between items-center">
                            <h3 className="font-black text-xl">{test.title}</h3>
                            {!result && <div className="text-2xl font-black text-sky-600">
                                {Math.floor(timeLeft/60)}:{(timeLeft%60).toString().padStart(2,'0')}
                            </div>}
                        </div>
                        <div className="flex-1 overflow-y-auto p-8 custom-scroll">
                            {result === null ? (
                                test.questions.map((q, i) => (
                                    <div key={i} className="mb-8">
                                        <p className="font-bold text-lg mb-4">{i+1}. {q.q}</p>
                                        <div className="space-y-2">
                                            {q.a.map((opt, oi) => (
                                                <button key={oi} onClick={() => setAnswers({...answers, [i]: oi})} 
                                                    className={`w-full text-left p-4 rounded-xl border-2 transition-all ${answers[i] === oi ? 'border-sky-500 bg-sky-50' : 'border-slate-100 hover:bg-slate-50'}`}>
                                                    {opt}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                ))
                            ) : (
                                <div className="text-center py-10">
                                    <div className="text-6xl mb-4">üèÜ</div>
                                    <h2 className="text-3xl font-black mb-2">K·∫øt qu·∫£ b√†i l√†m</h2>
                                    <p className="text-4xl font-black text-sky-600 mb-6">{result} / {test.questions.length}</p>
                                    <button onClick={onClose} className="px-8 py-3 bg-slate-900 text-white rounded-xl font-bold uppercase">ƒê√≥ng</button>
                                </div>
                            )}
                        </div>
                        {result === null && <div className="p-6 border-t"><button onClick={submit} className="w-full py-4 bg-sky-600 text-white rounded-2xl font-black uppercase shadow-lg">N·ªôp b√†i</button></div>}
                    </div>
                </div>
            );
        }

        // 4. CH∆Ø∆†NG TR√åNH CH√çNH
        function App() {
            const [user, setUser] = useState(null);
            const [tab, setTab] = useState('baigiang');
            const [lesson, setLesson] = useState(COURSE_DATA["12"][0]);
            const [test, setTest] = useState(null);

            useEffect(() => {
                const unsubscribe = auth.onAuthStateChanged(u => setUser(u));
                return () => unsubscribe();
            }, []);

            if (!user) return (
                <div className="h-screen flex items-center justify-center bg-sky-600 p-6 text-center">
                    <div className="bg-white p-10 rounded-[3rem] shadow-2xl max-w-sm w-full">
                        <div className="w-16 h-16 bg-sky-100 text-sky-600 rounded-2xl flex items-center justify-center text-3xl mx-auto mb-6">S</div>
                        <h1 className="text-2xl font-black mb-2 tracking-tighter">E-TECH HUB</h1>
                        <p className="text-slate-400 text-sm mb-8 font-medium uppercase tracking-widest">H·ªçc sinh ƒëƒÉng nh·∫≠p</p>
                        <button onClick={() => auth.signInWithPopup(new firebase.auth.GoogleAuthProvider())} className="w-full py-4 bg-sky-600 text-white rounded-2xl font-bold shadow-lg shadow-sky-100 active:scale-95 transition-all">ƒêƒÉng nh·∫≠p b·∫±ng Google</button>
                    </div>
                </div>
            );

            return (
                <div className="flex h-screen">
                    {/* SIDEBAR */}
                    <aside className="w-72 bg-white border-r flex flex-col p-6 shadow-sm z-50">
                        <div className="mb-10 flex items-center gap-3 px-2">
                            <div className="w-10 h-10 bg-sky-600 rounded-2xl flex items-center justify-center text-white font-bold shadow-lg">S</div>
                            <span className="font-extrabold text-xl tracking-tight">E-TECH Hub</span>
                        </div>
                        <nav className="flex-1 space-y-2">
                            {['baigiang', 'luyentap', 'kiemtra'].map(id => (
                                <button key={id} onClick={() => setTab(id)} className={`w-full flex items-center gap-4 px-5 py-4 rounded-2xl text-sm font-bold transition-all ${tab === id ? 'sidebar-active' : 'text-slate-400 hover:bg-slate-50'}`}>
                                    {id === 'baigiang' ? 'üìñ B√†i h·ªçc' : id === 'luyentap' ? 'üìù Luy·ªán t·∫≠p' : 'üéØ Ki·ªÉm tra'}
                                </button>
                            ))}
                        </nav>
                        <div className="mt-auto flex items-center gap-3 p-4 bg-slate-50 rounded-2xl border border-slate-100">
                            <img src={user.photoURL} className="w-8 h-8 rounded-full border border-white" />
                            <div className="overflow-hidden">
                                <p className="text-[10px] font-black truncate">{user.displayName}</p>
                                <button onClick={() => auth.signOut()} className="text-[9px] font-bold text-rose-500 uppercase">ƒêƒÉng xu·∫•t</button>
                            </div>
                        </div>
                    </aside>

                    {/* MAIN AREA */}
                    <main className="flex-1 bg-white overflow-hidden relative">
                        {tab === 'baigiang' ? (
                            <div className="flex h-full">
                                <div className="w-80 bg-slate-50 border-r p-6 flex flex-col">
                                    <h3 className="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-6">M·ª•c l·ª•c L·ªõp 12</h3>
                                    <div className="space-y-2 overflow-y-auto custom-scroll">
                                        {COURSE_DATA["12"].map(l => (
                                            <div key={l.id} onClick={() => setLesson(l)} className={`lesson-item p-4 text-sm font-bold ${lesson?.id === l.id ? 'active' : 'text-slate-600'}`}>{l.title}</div>
                                        ))}
                                    </div>
                                </div>
                                <div className="flex-1 p-12 overflow-y-auto custom-scroll">
                                    <div className="max-w-4xl mx-auto">
                                        <h2 className="text-4xl font-black text-slate-900 mb-8 tracking-tighter">{lesson?.title}</h2>
                                        <div className="bg-sky-50 p-10 rounded-[2.5rem] border border-sky-100 text-lg leading-relaxed font-medium text-slate-700 italic shadow-inner">
                                            {lesson?.content}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ) : (
                            <div className="p-12 h-full overflow-y-auto custom-scroll bg-slate-50">
                                <div className="max-w-5xl mx-auto">
                                    <h2 className="text-4xl font-black mb-2 tracking-tight">H·ªçc ph·∫ßn {tab === 'luyentap' ? 'Luy·ªán t·∫≠p' : 'Ki·ªÉm tra'}</h2>
                                    <p className="text-slate-400 font-bold mb-12">H·ªçc sinh ho√†n th√†nh c√°c y√™u c·∫ßu d∆∞·ªõi ƒë√¢y</p>
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                                        {MOCK_TESTS.map(t => (
                                            <div key={t.id} onClick={() => setTest(t)} className="neo-card p-8 h-64 flex flex-col justify-between cursor-pointer group">
                                                <div className="w-14 h-14 bg-sky-100 text-sky-600 rounded-2xl flex items-center justify-center text-2xl group-hover:bg-sky-600 group-hover:text-white transition-all shadow-inner">üìù</div>
                                                <div>
                                                    <h4 className="text-lg font-black group-hover:text-sky-600 transition-colors mb-1">{t.title}</h4>
                                                    <p className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">{t.questions.length} c√¢u h·ªèi ‚Ä¢ {t.duration/60} ph√∫t</p>
                                                </div>
                                                <div className="text-[10px] font-black text-sky-500 uppercase">B·∫Øt ƒë·∫ßu ngay ‚Üí</div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>

                    {test && <TestModule test={test} onClose={() => setTest(null)} />}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
