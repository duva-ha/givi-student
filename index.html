<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-TECH Hub 2026 - Student Official</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>

    <script src="bai1-10.js" defer></script>
    <script src="bai2-10.js" defer></script>
    <script src="bai1-11.js" defer></script>
    <script src="bai2-11.js" defer></script>
    <script src="bai1-12.js" defer></script>
    <script src="bai2-12.js" defer></script>
    <script src="quizzes.js" defer></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            --bg-warm: #fdfdfb;
            --sidebar-dark: #1e293b;
            --primary-accent: #334155;
        }

        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: var(--bg-warm); margin: 0; overflow: hidden; color: #334155; }
        
        /* Sidebar tinh t·∫ø */
        aside { background: var(--sidebar-dark); width: 260px; flex-shrink: 0; transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .nav-active { background: rgba(255,255,255,0.1); border-left: 3px solid #60a5fa; color: white; }
        
        /* Lesson Card hi·ªán ƒë·∫°i */
        .lesson-item { cursor: pointer; transition: all 0.3s; border: 1px solid #f1f5f9; margin-bottom: 8px; border-radius: 1rem; background: white; }
        .lesson-item:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.03); }
        .lesson-item.active { background: #f8fafc; border-color: #cbd5e1; }
        
        /* Scrollbar m·∫£nh */
        .custom-scroll::-webkit-scrollbar { width: 3px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }
        
        .hide-sidebar { transform: translateX(-100%); width: 0 !important; opacity: 0; }
        .content-shadow { box-shadow: -10px 0 30px rgba(0,0,0,0.02); }
        
        /* Hi·ªáu ·ª©ng chuy·ªÉn c·∫£nh m∆∞·ª£t */
        .fade-enter { opacity: 0; transform: translateY(10px); }
        .fade-enter-active { opacity: 1; transform: translateY(0); transition: all 0.5s; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        const firebaseConfig = {
            apiKey: "AIzaSyAV-XVaOyUiq1c-29VTaWjLKcEXrssnnTE",
            authDomain: "qlhs10a7.firebaseapp.com",
            projectId: "qlhs10a7",
            storageBucket: "qlhs10a7.firebasestorage.app",
            appId: "1:584229565603:web:d47a10f0a512a1a309bb16"
        };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        function App() {
            const [user, setUser] = useState(null);
            const [tab, setTab] = useState('baigiang');
            const [grade, setGrade] = useState('11');
            const [ls, setLs] = useState(null);
            const [isFocus, setIsFocus] = useState(false);
            const [localLessons, setLocalLessons] = useState({ "10": [], "11": [], "12": [] });

            const scanData = useCallback(() => {
                const results = { "10": [], "11": [], "12": [] };
                ["10", "11", "12"].forEach(g => {
                    for (let i = 1; i <= 20; i++) {
                        const data = window[`D${g}_B${i}`];
                        if (data) results[g].push({ ...data, lessonIndex: i });
                    }
                });
                setLocalLessons(results);
            }, []);

            useEffect(() => {
                const unsub = auth.onAuthStateChanged(u => setUser(u));
                const timer = setInterval(scanData, 1000);
                return () => { unsub(); clearInterval(timer); };
            }, [scanData]);

            useEffect(() => {
                const list = localLessons[grade];
                if (list && list.length > 0) setLs(list[0]);
                else setLs(null);
            }, [grade, localLessons]);

            if (!user) return (
                <div className="h-screen flex items-center justify-center bg-slate-900">
                    <button onClick={() => auth.signInWithPopup(new firebase.auth.GoogleAuthProvider())} className="bg-white px-8 py-3 rounded-xl font-bold text-slate-900 shadow-xl hover:scale-105 transition-all text-xs tracking-widest">ƒêƒÇNG NH·∫¨P E-TECH</button>
                </div>
            );

            return (
                <div className="flex h-screen overflow-hidden">
                    {/* SIDEBAR TR·∫¶M ·∫§M */}
                    <aside className={`flex flex-col py-6 px-4 z-50 ${isFocus ? 'hide-sidebar' : ''}`}>
                        <div className="mb-10 px-4 flex items-center gap-3">
                            <div className="w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center text-white font-black italic shadow-lg shadow-blue-500/20">E</div>
                            <span className="font-bold text-lg tracking-tight text-white opacity-90 uppercase">Hub 2026</span>
                        </div>
                        <nav className="flex-1 space-y-1">
                            {[
                                {id: 'baigiang', label: 'B√†i gi·∫£ng', icon: 'üìñ'},
                                {id: 'luyentap', label: 'Luy·ªán t·∫≠p', icon: 'üìù'},
                                {id: 'kiemtra', label: 'Ki·ªÉm tra', icon: 'üéØ'}
                            ].map(item => (
                                <button key={item.id} onClick={() => setTab(item.id)} className={`w-full flex items-center gap-3 px-4 py-3 text-[11px] font-bold uppercase tracking-widest transition-all rounded-lg ${tab === item.id ? 'nav-active' : 'text-slate-400 hover:text-slate-200'}`}>
                                    <span className="text-base">{item.icon}</span> {item.label}
                                </button>
                            ))}
                        </nav>
                        <div className="mt-auto flex items-center gap-3 p-3 rounded-xl bg-white/5 border border-white/5">
                            <img src={user.photoURL} className="w-8 h-8 rounded-lg opacity-80" />
                            <div className="truncate"><p className="text-[10px] font-bold text-slate-300">{user.displayName}</p></div>
                        </div>
                    </aside>

                    {/* MAIN CONTENT */}
                    <main className="flex-1 bg-white relative rounded-l-[2rem] content-shadow overflow-hidden flex flex-col">
                        {/* HEADER NH·ªé G·ªåN TINH T·∫æ */}
                        <header className="h-14 px-8 flex items-center justify-between border-b border-slate-50">
                            <div className="flex items-center gap-4">
                                <span className="text-[10px] font-bold uppercase text-slate-400 tracking-widest">H·ªá th·ªëng h·ªçc t·∫≠p /</span>
                                <select value={grade} onChange={e => setGrade(e.target.value)} className="bg-transparent font-bold text-slate-700 outline-none text-xs cursor-pointer hover:text-blue-600 transition-colors">
                                    <option value="12">L·ªõp 12</option>
                                    <option value="11">L·ªõp 11</option>
                                    <option value="10">L·ªõp 10</option>
                                </select>
                            </div>
                            
                            {/* N√öT TO√ÄN M√ÄN H√åNH (THU G·ªåN CH·ªà ICON) */}
                            <button onClick={() => setIsFocus(!isFocus)} className="w-8 h-8 flex items-center justify-center rounded-lg hover:bg-slate-100 transition-all text-slate-400 hover:text-slate-900 group" title="Ch·∫ø ƒë·ªô t·∫≠p trung">
                                {isFocus ? 
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" /></svg> : 
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4" /></svg>
                                }
                            </button>
                        </header>

                        <div className="flex-1 flex overflow-hidden">
                            {tab === 'baigiang' ? (
                                <React.Fragment>
                                    {/* DANH S√ÅCH B√ÄI H·ªåC TR√ÅI */}
                                    <div className={`w-72 border-r border-slate-50 p-6 flex flex-col transition-all duration-500 bg-slate-50/30 ${isFocus ? 'hide-sidebar' : ''}`}>
                                        <div className="flex-1 overflow-y-auto pr-2 custom-scroll space-y-1">
                                            {localLessons[grade].length > 0 ? localLessons[grade].map(l => (
                                                <div key={l.id} onClick={() => setLs(l)} className={`lesson-item p-4 ${ls?.id === l.id ? 'active' : ''}`}>
                                                    <div className="text-[8px] font-bold text-slate-300 uppercase mb-1">B√†i h·ªçc {l.lessonIndex}</div>
                                                    <div className="font-bold text-[11px] text-slate-600 line-clamp-1">{l.title}</div>
                                                </div>
                                            )) : <div className="text-center py-20 text-[10px] font-bold text-slate-300 uppercase italic">ƒêang t·∫£i...</div>}
                                        </div>
                                    </div>

                                    {/* N·ªòI DUNG CH√çNH */}
                                    <div className="flex-1 p-12 overflow-y-auto relative custom-scroll bg-white">
                                        <div className={`transition-all duration-700 ${isFocus ? "max-w-4xl mx-auto" : ""}`}>
                                            {ls ? (
                                                <div className="animate-in fade-in duration-700">
                                                    <h1 className="text-4xl font-extrabold mb-8 tracking-tight text-slate-800 leading-tight">{ls.title}</h1>
                                                    <div className="text-lg text-slate-500 leading-relaxed font-normal whitespace-pre-wrap mb-12">
                                                        {ls.content}
                                                    </div>
                                                    
                                                    {/* Khu v·ª±c h∆∞·ªõng d·∫´n tr·∫ßm ·∫•m */}
                                                    <div className="bg-slate-50 p-8 rounded-2xl border-l-4 border-slate-300">
                                                        <div className="flex items-center gap-3 mb-4">
                                                            <span className="text-xl">üí°</span>
                                                            <h4 className="font-bold text-[10px] uppercase text-slate-500 tracking-widest">Ghi ch√∫ quan tr·ªçng</h4>
                                                        </div>
                                                        <p className="italic text-slate-600 font-medium text-base leading-relaxed">{ls.instruction}</p>
                                                    </div>
                                                </div>
                                            ) : (
                                                <div className="h-full flex flex-col items-center justify-center opacity-10">
                                                    <div className="text-7xl mb-4 text-slate-400">üìñ</div>
                                                    <p className="font-bold text-xl uppercase tracking-widest text-slate-400">H√£y ch·ªçn m·ªôt b√†i h·ªçc</p>
                                                </div>
                                            )}
                                        </div>
                                    </div>
                                </React.Fragment>
                            ) : (
                                <div className="flex-1 flex flex-col items-center justify-center opacity-30">
                                    <div className="text-6xl mb-4">üéØ</div>
                                    <h2 className="text-2xl font-bold uppercase tracking-[0.2em] text-slate-800">D·ªØ li·ªáu n·∫°p t·ª´ quizzes.js</h2>
                                </div>
                            )}
                        </div>
                    </main>
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
